// Generated by CoffeeScript 2.5.1
var Button, SCALEX, SCALEY, buttons, draw, getLocalCoords, mouseClicked, mouseMoved, setup, windowResized;

buttons = {};

SCALEX = 1;

SCALEY = 1;

// Löser problemet! Transformeringar behöver inte skötas!
// Alternativ som fungerar lika bra, men kräver mer kod.
// https://www.reddit.com/r/p5js/comments/jo7ucf/clicking_on_a_translated_scaled_and_rotated_shape/
getLocalCoords = function() { // tar 3 microsekunder
  var matrix, pd;
  matrix = drawingContext.getTransform();
  pd = pixelDensity();
  return matrix.inverse().transformPoint(new DOMPoint(mouseX * pd, mouseY * pd));
};

Button = class Button {
  constructor(text1, x1, y1, w, h, bg) {
    this.text = text1;
    this.x = x1;
    this.y = y1;
    this.w = w;
    this.h = h;
    this.bg = bg;
    this.inverted = false;
  }

  draw() {
    fill(this.bg);
    rect(this.x, this.y, this.w, this.h);
    fill('black');
    if (this.inverted) {
      push();
      translate(this.x, this.y); // tillbaka till origo
      rotate(180); // vänd
      translate(-this.x, -this.y); // tillbaka till x,y
      text(this.text, this.x, this.y);
      return pop();
    } else {
      return text(this.text, this.x, this.y);
    }
  }

  inside(x, y) {
    var ref, ref1;
    return (-this.w / 2 <= (ref = x - this.x) && ref <= this.w / 2) && (-this.h / 2 <= (ref1 = y - this.y) && ref1 <= this.h / 2);
  }

};

windowResized = function() {
  var diag;
  resizeCanvas(innerWidth, innerHeight);
  SCALEY = width / 100;
  SCALEX = height / 100;
  diag = sqrt(width * width + height * height);
  return console.log('resized', width, height, SCALEX, SCALEY);
};

setup = function() {
  createCanvas(100, 100); // innerWidth,innerHeight
  SCALEY = width / 100;
  SCALEX = height / 100;
  console.log('setup', width, height, SCALEX, SCALEY);
  rectMode(CENTER);
  angleMode(DEGREES);
  textAlign(CENTER, CENTER);
  // rectMode CENTER
  buttons.left = new Button('left', 50, 22, 100, 44, 'white');
  buttons.pause = new Button('pause', 25, 50, 50, 12, 'white');
  buttons.edit = new Button('edit', 75, 50, 50, 12, 'white');
  buttons.right = new Button('right', 50, 78, 100, 44, 'white');
  return buttons.left.inverted = true;
};

draw = function() {
  background('black');
  translate(-50, -50); // tillbaka till origo
  rotate(90); // vänd
  translate(50, -(50 + width)); // tillbaka till x,y
  scale(SCALEX, SCALEY);
  strokeWeight(1 / SCALEX);
  buttons.pause.draw();
  buttons.edit.draw();
  buttons.right.draw();
  return buttons.left.draw();
};

mouseClicked = function() {
  var button, key, results, x, y;
  ({x, y} = getLocalCoords());
  console.log(x, y);
  results = [];
  for (key in buttons) {
    button = buttons[key];
    if (button.inside(x, y)) {
      results.push(console.log('Clicked', key, x, y));
    } else {
      results.push(void 0);
    }
  }
  return results;
};

mouseMoved = function() {
  var button, key, results, x, y;
  ({x, y} = getLocalCoords());
  results = [];
  for (key in buttons) {
    button = buttons[key];
    results.push(button.bg = button.inside(x, y) ? 'red' : 'white');
  }
  return results;
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTW91c2VUcmFuc2Zvcm0uanMiLCJzb3VyY2VSb290IjoiLi4iLCJzb3VyY2VzIjpbImNvZmZlZVxcTW91c2VUcmFuc2Zvcm0uY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxJQUFBLE1BQUEsRUFBQSxNQUFBLEVBQUEsTUFBQSxFQUFBLE9BQUEsRUFBQSxJQUFBLEVBQUEsY0FBQSxFQUFBLFlBQUEsRUFBQSxVQUFBLEVBQUEsS0FBQSxFQUFBOztBQUFBLE9BQUEsR0FBVSxDQUFBOztBQUNWLE1BQUEsR0FBUzs7QUFDVCxNQUFBLEdBQVMsRUFGVDs7Ozs7QUFRQSxjQUFBLEdBQWlCLFFBQUEsQ0FBQSxDQUFBLEVBQUE7QUFDakIsTUFBQSxNQUFBLEVBQUE7RUFBQyxNQUFBLEdBQVMsY0FBYyxDQUFDLFlBQWYsQ0FBQTtFQUNULEVBQUEsR0FBSyxZQUFBLENBQUE7U0FDTCxNQUFNLENBQUMsT0FBUCxDQUFBLENBQWdCLENBQUMsY0FBakIsQ0FBZ0MsSUFBSSxRQUFKLENBQWEsTUFBQSxHQUFTLEVBQXRCLEVBQXlCLE1BQUEsR0FBUyxFQUFsQyxDQUFoQztBQUhnQjs7QUFLWCxTQUFOLE1BQUEsT0FBQTtFQUNDLFdBQWMsTUFBQSxJQUFBLElBQUEsR0FBQSxHQUFBLElBQUEsQ0FBQTtJQUFDLElBQUMsQ0FBQTtJQUFLLElBQUMsQ0FBQTtJQUFFLElBQUMsQ0FBQTtJQUFFLElBQUMsQ0FBQTtJQUFFLElBQUMsQ0FBQTtJQUFFLElBQUMsQ0FBQTtJQUNqQyxJQUFDLENBQUEsUUFBRCxHQUFZO0VBREM7O0VBRWQsSUFBTyxDQUFBLENBQUE7SUFDTixJQUFBLENBQUssSUFBQyxDQUFBLEVBQU47SUFDQSxJQUFBLENBQUssSUFBQyxDQUFBLENBQU4sRUFBUSxJQUFDLENBQUEsQ0FBVCxFQUFXLElBQUMsQ0FBQSxDQUFaLEVBQWMsSUFBQyxDQUFBLENBQWY7SUFDQSxJQUFBLENBQUssT0FBTDtJQUNBLElBQUcsSUFBQyxDQUFBLFFBQUo7TUFDQyxJQUFB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WSIsInNvdXJjZXNDb250ZW50IjpbImJ1dHRvbnMgPSB7fVxyXG5TQ0FMRVggPSAxXHJcblNDQUxFWSA9IDFcclxuXHJcbiMgTMO2c2VyIHByb2JsZW1ldCEgVHJhbnNmb3JtZXJpbmdhciBiZWjDtnZlciBpbnRlIHNrw7Z0YXMhXHJcbiMgQWx0ZXJuYXRpdiBzb20gZnVuZ2VyYXIgbGlrYSBicmEsIG1lbiBrcsOkdmVyIG1lciBrb2QuXHJcbiMgaHR0cHM6Ly93d3cucmVkZGl0LmNvbS9yL3A1anMvY29tbWVudHMvam83dWNmL2NsaWNraW5nX29uX2FfdHJhbnNsYXRlZF9zY2FsZWRfYW5kX3JvdGF0ZWRfc2hhcGUvXHJcblxyXG5nZXRMb2NhbENvb3JkcyA9IC0+ICMgdGFyIDMgbWljcm9zZWt1bmRlclxyXG5cdG1hdHJpeCA9IGRyYXdpbmdDb250ZXh0LmdldFRyYW5zZm9ybSgpXHJcblx0cGQgPSBwaXhlbERlbnNpdHkoKVxyXG5cdG1hdHJpeC5pbnZlcnNlKCkudHJhbnNmb3JtUG9pbnQgbmV3IERPTVBvaW50IG1vdXNlWCAqIHBkLG1vdXNlWSAqIHBkXHJcblxyXG5jbGFzcyBCdXR0b25cclxuXHRjb25zdHJ1Y3RvciA6IChAdGV4dCxAeCxAeSxAdyxAaCxAYmcpIC0+XHJcblx0XHRAaW52ZXJ0ZWQgPSBmYWxzZVxyXG5cdGRyYXcgOiAtPlxyXG5cdFx0ZmlsbCBAYmdcclxuXHRcdHJlY3QgQHgsQHksQHcsQGhcclxuXHRcdGZpbGwgJ2JsYWNrJ1xyXG5cdFx0aWYgQGludmVydGVkXHJcblx0XHRcdHB1c2goKVxyXG5cdFx0XHR0cmFuc2xhdGUgQHgsQHkgIyB0aWxsYmFrYSB0aWxsIG9yaWdvXHJcblx0XHRcdHJvdGF0ZSAxODAgICMgdsOkbmRcclxuXHRcdFx0dHJhbnNsYXRlIC1AeCwtQHkgIyB0aWxsYmFrYSB0aWxsIHgseVxyXG5cdFx0XHR0ZXh0IEB0ZXh0LEB4LEB5XHJcblx0XHRcdHBvcCgpXHJcblx0XHRlbHNlXHJcblx0XHRcdHRleHQgQHRleHQsQHgsQHlcclxuXHRpbnNpZGUgOiAoeCx5KSAtPiAtQHcvMiA8PSB4LUB4IDw9IEB3LzIgYW5kIC1AaC8yIDw9IHktQHkgPD0gQGgvMlxyXG5cclxud2luZG93UmVzaXplZCA9IC0+XHJcblx0cmVzaXplQ2FudmFzIGlubmVyV2lkdGgsIGlubmVySGVpZ2h0XHJcblx0U0NBTEVZID0gd2lkdGgvMTAwXHJcblx0U0NBTEVYID0gaGVpZ2h0LzEwMFxyXG5cdGRpYWcgPSBzcXJ0IHdpZHRoKndpZHRoICsgaGVpZ2h0KmhlaWdodFxyXG5cdGNvbnNvbGUubG9nICdyZXNpemVkJyx3aWR0aCxoZWlnaHQsU0NBTEVYLFNDQUxFWVxyXG5cclxuc2V0dXAgPSAtPlxyXG5cdGNyZWF0ZUNhbnZhcyAxMDAsMTAwICMgaW5uZXJXaWR0aCxpbm5lckhlaWdodFxyXG5cdFNDQUxFWSA9IHdpZHRoLzEwMFxyXG5cdFNDQUxFWCA9IGhlaWdodC8xMDBcclxuXHRjb25zb2xlLmxvZyAnc2V0dXAnLHdpZHRoLGhlaWdodCxTQ0FMRVgsU0NBTEVZXHJcblx0cmVjdE1vZGUgQ0VOVEVSXHJcblx0YW5nbGVNb2RlIERFR1JFRVNcclxuXHR0ZXh0QWxpZ24gQ0VOVEVSLENFTlRFUlxyXG5cclxuXHQjIHJlY3RNb2RlIENFTlRFUlxyXG5cdGJ1dHRvbnMubGVmdCAgPSBuZXcgQnV0dG9uICdsZWZ0JywgNTAsMjIsMTAwLDQ0LCd3aGl0ZSdcclxuXHRidXR0b25zLnBhdXNlID0gbmV3IEJ1dHRvbiAncGF1c2UnLDI1LDUwLCA1MCwxMiwnd2hpdGUnXHJcblx0YnV0dG9ucy5lZGl0ICA9IG5ldyBCdXR0b24gJ2VkaXQnLCA3NSw1MCwgNTAsMTIsJ3doaXRlJ1xyXG5cdGJ1dHRvbnMucmlnaHQgPSBuZXcgQnV0dG9uICdyaWdodCcsNTAsNzgsMTAwLDQ0LCd3aGl0ZSdcclxuXHJcblx0YnV0dG9ucy5sZWZ0LmludmVydGVkID0gdHJ1ZVxyXG5cclxuZHJhdyA9IC0+IFxyXG5cdGJhY2tncm91bmQgJ2JsYWNrJ1xyXG5cdHRyYW5zbGF0ZSAtNTAsLTUwICMgdGlsbGJha2EgdGlsbCBvcmlnb1xyXG5cdHJvdGF0ZSA5MCAgIyB2w6RuZFxyXG5cdHRyYW5zbGF0ZSA1MCwtKDUwK3dpZHRoKSAjIHRpbGxiYWthIHRpbGwgeCx5XHJcblxyXG5cdHNjYWxlIFNDQUxFWCxTQ0FMRVlcclxuXHRzdHJva2VXZWlnaHQgMS9TQ0FMRVhcclxuXHRidXR0b25zLnBhdXNlLmRyYXcoKVxyXG5cdGJ1dHRvbnMuZWRpdC5kcmF3KClcclxuXHRidXR0b25zLnJpZ2h0LmRyYXcoKVxyXG5cdGJ1dHRvbnMubGVmdC5kcmF3KClcclxuXHRcclxubW91c2VDbGlja2VkID0gLT5cclxuXHR7eCx5fSA9IGdldExvY2FsQ29vcmRzKClcclxuXHRjb25zb2xlLmxvZyB4LHlcclxuXHRmb3Iga2V5IG9mIGJ1dHRvbnNcclxuXHRcdGJ1dHRvbiA9IGJ1dHRvbnNba2V5XVxyXG5cdFx0aWYgYnV0dG9uLmluc2lkZSh4LHkpIHRoZW4gY29uc29sZS5sb2cgJ0NsaWNrZWQnLGtleSx4LHlcclxuXHJcbm1vdXNlTW92ZWQgPSAtPlxyXG5cdHt4LHl9ID0gZ2V0TG9jYWxDb29yZHMoKVxyXG5cdGZvciBrZXkgb2YgYnV0dG9uc1xyXG5cdFx0YnV0dG9uID0gYnV0dG9uc1trZXldXHJcblx0XHRidXR0b24uYmcgPSBpZiBidXR0b24uaW5zaWRlKHgsIHkpIHRoZW4gJ3JlZCcgZWxzZSAnd2hpdGUnIl19
//# sourceURL=c:\github\Transformer\coffee\MouseTransform.coffee